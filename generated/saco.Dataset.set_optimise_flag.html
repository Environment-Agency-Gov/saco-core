

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>saco.Dataset.set_optimise_flag &mdash; saco  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="saco.Dataset.set_tables" href="saco.Dataset.set_tables.html" />
    <link rel="prev" title="saco.Dataset.set_flow_targets" href="saco.Dataset.set_flow_targets.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            saco
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Background:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../calculator.html">Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimiser.html">Optimiser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../fields.html">Table Fields</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../reference-dataset.html">Dataset</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../reference-dataset.html#saco.Dataset"><code class="docutils literal notranslate"><span class="pre">Dataset</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="saco.Dataset.find_outlet_waterbodies.html">saco.Dataset.find_outlet_waterbodies</a></li>
<li class="toctree-l2"><a class="reference internal" href="saco.Dataset.identify_upstream_waterbodies.html">saco.Dataset.identify_upstream_waterbodies</a></li>
<li class="toctree-l2"><a class="reference internal" href="saco.Dataset.load_data.html">saco.Dataset.load_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="saco.Dataset.set_flow_targets.html">saco.Dataset.set_flow_targets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">saco.Dataset.set_optimise_flag</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#saco.Dataset.set_optimise_flag"><code class="docutils literal notranslate"><span class="pre">Dataset.set_optimise_flag()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="saco.Dataset.set_tables.html">saco.Dataset.set_tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="saco.Dataset.write_tables.html">saco.Dataset.write_tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference-calculate.html">Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference-optimise.html">Optimiser</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">saco</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../reference-dataset.html">Dataset</a></li>
      <li class="breadcrumb-item active">saco.Dataset.set_optimise_flag</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/saco.Dataset.set_optimise_flag.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="saco-dataset-set-optimise-flag">
<h1>saco.Dataset.set_optimise_flag<a class="headerlink" href="#saco-dataset-set-optimise-flag" title="Link to this heading"></a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="saco.Dataset.set_optimise_flag">
<span class="sig-prename descclassname"><span class="pre">Dataset.</span></span><span class="sig-name descname"><span class="pre">set_optimise_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">swabs_exclusions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">('reservoir',</span> <span class="pre">'ldmu',</span> <span class="pre">'lake')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">purpose_exclusions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_deregulated</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_below</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_below_case</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">('FL',</span> <span class="pre">95)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#saco.Dataset.set_optimise_flag" title="Link to this definition"></a></dt>
<dd><p>Set the (at least initial) value of the optimise flag columns in relevant tables.</p>
<p>The main role of this method is to provide defaults on what is included and
excluded (i.e. available for change or not) during optimisation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>swabs_exclusions</strong> – Types of surface water abstractions to exclude (one or
more of: ‘reservoir’, ‘ldmu’, ‘lake’. An empty list or None may also be
provided.</p></li>
<li><p><strong>purpose_exclusions</strong> – Purpose codes to exclude. Note that just the “start” of
a purpose code can be supplied to act as a wildcard. For example,
purpose_exclusions=[‘WPWS330’, ‘E’] would flag any rows with the specific
purpose WPWS330 for exclusion from optimisation, as well as any purposes
beginning E. No exclusions by default.</p></li>
<li><p><strong>exclude_deregulated</strong> – Whether to exclude “deregulated licences” from
optimisation - default is True, as not amenable to change in reality.</p></li>
<li><p><strong>exclude_below</strong> – Threshold impact (Ml/d) below which (&lt;=) abstractions should
be excluded during optimisation. Use None or 0.0 to indicate that there
should not be any exclusions based on impact magnitude. Based on
scenario and percentile combination defined by exclude_below_case.</p></li>
<li><p><strong>exclude_below_case</strong> – Scenario and percentile combination to use in
conjunction with exclude_below threshold. By default, impacts less than
or equal to exclude_below under the fully licensed scenario at Q95 will
be flagged for exclusion from optimisation. Expects tuple like
(‘FL’, 95).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method operates on the <em>data</em> attributes of the SWABS_NBB, GWABs_NBB
and SupResGW_NBB (complex) tables. If not already present, it inserts a flag
column (called ‘Optimise_Flag’) that is used in the optimiser to
include/exclude (1/0) particular table rows in the optimisation. By default,
SWABS and GWABS rows are included (if not ruled out by one of the exlusion
arguments), whereas complex impacts are excluded. If ‘Optimise_Flag’ columns
are already present in the tables, this method will not modify them.</p>
<p>Options are available to:</p>
<blockquote>
<div><ul class="simple">
<li><p>Flag particular types of surface water abstractions for exclusion from
optimisation (in line with the Fix-It tool).</p></li>
<li><p>Flag particular abstraction purposes for exclusion from optimisation.</p></li>
<li><p>Flag that deregulated licences should be excluded during optimisation.</p></li>
<li><p>Flag that impacts below some threshold should be excluded during
optimisation.</p></li>
</ul>
</div></blockquote>
<p>Note that exclusions based on purpose are applied to both surface water and
groundwater abstractions.</p>
<p>A user also has the option to (1) modify the Optimise_Flag columns created by
this method or (2) set them manually. For complex impacts (in table
SupResGW_NBB), manual intervention is necessary (by default these impacts
are excluded from optimisation). See tutorial in documentation for complex
flag details.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="saco.Dataset.set_flow_targets.html" class="btn btn-neutral float-left" title="saco.Dataset.set_flow_targets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="saco.Dataset.set_tables.html" class="btn btn-neutral float-right" title="saco.Dataset.set_tables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Environment Agency.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>